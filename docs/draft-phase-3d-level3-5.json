{
  "title": "Phase 3d: Port 6 schema types to TypeScript (Level 3-5: VideoObject, MathSolver, ShippingService, Offer, Organization, Person)",
  "body": "## Overview\n\nPort 6 schema types at dependency levels 3-5. All external dependencies are already on master. Types within this batch depend on each other — implement in the order listed.\n\n## Reference\n\n- **PHP source**: `php/src/v1/Schema/` (see individual files below)\n- **TS conventions**: `AGENTS-ts.md`\n- **TS skill**: `.claude/skills/ts-schema-implementation/SKILL.md`\n- **Existing TS examples**: `ts/src/schema/PostalAddress.ts` (options object), `ts/src/schema/Brand.ts` (positional)\n\n## Types to implement\n\nAll files go in `ts/src/schema/`. Tests go in `ts/test/schema/`.\n\n**IMPORTANT**: Implement types in the order listed — later types depend on earlier ones in this batch.\n\n### 1. `VideoObject.ts` — OPTIONS OBJECT (10 optional properties)\n\nPHP ref: `php/src/v1/Schema/VideoObject.php`\n\nCreate an exported `VideoObjectOptions` interface:\n\n```typescript\nexport interface VideoObjectOptions {\n    name: string;\n    thumbnailUrl: readonly string[];\n    uploadDate: string;\n    description?: string | null;\n    contentUrl?: string | null;\n    embedUrl?: string | null;\n    duration?: string | null;\n    expires?: string | null;\n    regionsAllowed?: string | null;\n    interactionStatistic?: InteractionCounter | readonly InteractionCounter[] | null;\n    hasPart?: readonly Clip[] | null;\n    ineligibleRegion?: string | null;\n    publication?: BroadcastEvent | null;\n}\n```\n\nNote: `name`, `thumbnailUrl`, `uploadDate` are REQUIRED (no `?`). `interactionStatistic` accepts a single item OR an array.\n\nImports: `InteractionCounter`, `Clip`, `BroadcastEvent` from `../schema/`\n\nschemaType: `'VideoObject'`\n\n### 2. `MathSolver.ts` — positional constructor\n\nPHP ref: `php/src/v1/Schema/MathSolver.php`\n\nProperties:\n- `url: string` (required)\n- `usageInfo: string` (required)\n- `potentialAction: SolveMathAction | readonly SolveMathAction[]` (required)\n- `name: string | null` (optional, default null)\n- `inLanguage: string | null` (optional, default null)\n- `learningResourceType: string | null` (optional, default null)\n- `assesses: readonly string[] | null` (optional, default null)\n\n**Multi-type**: `static readonly schemaType = [\"MathSolver\", \"LearningResource\"] as const;`\n\nNote: `potentialAction` accepts a single item OR an array (required, not nullable).\n\nImports: `SolveMathAction` from `../schema/`\n\nschemaType: `[\"MathSolver\", \"LearningResource\"]`\n\n### 3. `ShippingService.ts` — positional constructor\n\nPHP ref: `php/src/v1/Schema/ShippingService.php`\n\nProperties:\n- `shippingConditions: ShippingConditions | readonly ShippingConditions[]` (required)\n- `name: string | null` (optional, default null)\n- `description: string | null` (optional, default null)\n- `fulfillmentType: FulfillmentTypeEnumeration | null` (optional, default null)\n- `handlingTime: ServicePeriod | null` (optional, default null)\n- `validForMemberTier: MemberProgramTier | null` (optional, default null)\n\nNote: `shippingConditions` accepts a single item OR an array (required, not nullable).\n\nImports: `ShippingConditions`, `ServicePeriod`, `MemberProgramTier` from `../schema/`, `FulfillmentTypeEnumeration` from `../enum/`\n\nschemaType: `'ShippingService'`\n\n### 4. `Offer.ts` — OPTIONS OBJECT (6 optional properties)\n\nPHP ref: `php/src/v1/Schema/Offer.php`\n\nCreate an exported `OfferOptions` interface:\n\n```typescript\nexport interface OfferOptions {\n    url: string;\n    priceCurrency: string;\n    price: number;\n    availability: ItemAvailability;\n    itemCondition?: OfferItemCondition | null;\n    shippingDetails?: readonly OfferShippingDetails[] | null;\n    validFrom?: string | null;\n    priceValidUntil?: string | null;\n    priceSpecification?: UnitPriceSpecification | readonly UnitPriceSpecification[] | null;\n    hasMerchantReturnPolicy?: MerchantReturnPolicy | null;\n}\n```\n\nNote: `url`, `priceCurrency`, `price`, `availability` are REQUIRED (no `?`). `priceSpecification` accepts a single item OR an array.\n\nImports: `OfferShippingDetails`, `UnitPriceSpecification`, `MerchantReturnPolicy` from `../schema/`, `ItemAvailability`, `OfferItemCondition` from `../enum/`\n\nschemaType: `'Offer'`\n\n### 5. `Organization.ts` — OPTIONS OBJECT (22 optional properties)\n\nPHP ref: `php/src/v1/Schema/Organization.php`\n\nCreate an exported `OrganizationOptions` interface:\n\n```typescript\nexport interface OrganizationOptions {\n    name: string;\n    url?: string | null;\n    logo?: string | null;\n    description?: string | null;\n    email?: string | null;\n    telephone?: string | null;\n    address?: PostalAddress | null;\n    contactPoint?: ContactPoint | null;\n    sameAs?: readonly string[] | null;\n    foundingDate?: string | null;\n    alternateName?: string | null;\n    legalName?: string | null;\n    numberOfEmployees?: QuantitativeValue | null;\n    taxID?: string | null;\n    vatID?: string | null;\n    naics?: string | null;\n    duns?: string | null;\n    leiCode?: string | null;\n    iso6523Code?: string | null;\n    globalLocationNumber?: string | null;\n    hasMerchantReturnPolicy?: MerchantReturnPolicy | readonly MerchantReturnPolicy[] | null;\n    hasMemberProgram?: MemberProgram | readonly MemberProgram[] | null;\n    hasShippingService?: ShippingService | readonly ShippingService[] | null;\n}\n```\n\nNote: Only `name` is REQUIRED. Three union properties (`hasMerchantReturnPolicy`, `hasMemberProgram`, `hasShippingService`) each accept a single item OR an array.\n\nImports: `PostalAddress`, `ContactPoint`, `QuantitativeValue`, `MerchantReturnPolicy`, `MemberProgram`, `ShippingService` from `../schema/`\n\nschemaType: `'Organization'`\n\n### 6. `Person.ts` — OPTIONS OBJECT (15 optional properties)\n\nPHP ref: `php/src/v1/Schema/Person.php`\n\n**IMPORTANT**: This type depends on Organization (#5 above). Implement after Organization.\n\nCreate an exported `PersonOptions` interface:\n\n```typescript\nexport interface PersonOptions {\n    name: string;\n    url?: string | null;\n    image?: string | null;\n    email?: string | null;\n    telephone?: string | null;\n    jobTitle?: string | null;\n    worksFor?: Organization | null;\n    sameAs?: readonly string[] | null;\n    description?: string | null;\n    givenName?: string | null;\n    familyName?: string | null;\n    address?: PostalAddress | null;\n    interactionStatistic?: InteractionCounter | readonly InteractionCounter[] | null;\n    agentInteractionStatistic?: InteractionCounter | null;\n    identifier?: string | null;\n    alternateName?: string | null;\n}\n```\n\nNote: Only `name` is REQUIRED. `interactionStatistic` accepts a single item OR an array (same pattern as VideoObject). `agentInteractionStatistic` is a single item only.\n\nImports: `Organization` (from this batch), `PostalAddress`, `InteractionCounter` from `../schema/`\n\nschemaType: `'Person'`\n\n## Testing\n\nCreate one test file per type in `ts/test/schema/`. Each test file must cover:\n\n1. **Minimal construction** — only required properties, verify `@context`, `@type`, required fields\n2. **Null omission** — optional properties when null do NOT appear in JSON output\n3. **Full construction** — all properties set (or a representative subset for large types like Organization), verify they appear\n4. **Special cases**:\n   - `VideoObject`: test `interactionStatistic` with both single item and array; test `thumbnailUrl` as array\n   - `MathSolver`: verify `@type` serializes as `[\"MathSolver\", \"LearningResource\"]`; test `potentialAction` with both single and array\n   - `ShippingService`: test `shippingConditions` with both single and array\n   - `Offer`: test `priceSpecification` with both single and array; test enum serialization for `availability` and `itemCondition`\n   - `Organization`: test union properties with both single and array; test with nested schema objects\n   - `Person`: test `interactionStatistic` with both single and array; test `worksFor` with Organization\n\n## Barrel exports\n\nUpdate `ts/src/index.ts` to export all 6 new types AND their Options interfaces (`VideoObjectOptions`, `OfferOptions`, `OrganizationOptions`, `PersonOptions`). Keep exports sorted alphabetically.\n\n## Acceptance criteria\n\n- [ ] All 6 schema class files created in `ts/src/schema/`\n- [ ] 2 types use positional constructor (MathSolver, ShippingService), 4 types use options object (VideoObject, Offer, Organization, Person)\n- [ ] Property names match PHP exactly\n- [ ] Schema type dependencies correctly imported\n- [ ] Union types handled correctly (single-or-array pattern on interactionStatistic, potentialAction, shippingConditions, priceSpecification, hasMerchantReturnPolicy, hasMemberProgram, hasShippingService)\n- [ ] Array types use `readonly` where appropriate\n- [ ] MathSolver multi-type `[\"MathSolver\", \"LearningResource\"]` handled correctly\n- [ ] Test file for each type in `ts/test/schema/`\n- [ ] Tests pass (`npm run test`)\n- [ ] Biome passes (`npx biome check`)\n- [ ] Build succeeds (`npm run build`)\n- [ ] `index.ts` updated with all new exports\n- [ ] No modifications to `JsonLdGenerator.ts` or `TypedSchema.ts`\n- [ ] No `any` types used",
  "labels": ["agent-task"],
  "assignees": ["copilot-swe-agent[bot]"],
  "agent_assignment": {
    "target_repo": "EvaLok/schema-org-json-ld",
    "base_branch": "master",
    "model": "gpt-5.3-codex",
    "custom_instructions": ""
  }
}
