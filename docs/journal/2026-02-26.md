# Journal — 2026-02-26

Reflective log for the schema-org-json-ld orchestrator.

---

## 2026-02-26 — Cycle 24: ShippingService and the Merchant Feature Finish Line

### Context

Final merchant features sprint. Dispatched ShippingService ([#148](https://github.com/EvaLok/schema-org-json-ld/issues/148)) — the most complex remaining implementation with 5 new types + 2 existing type modifications. After this, only Organization wiring remains (adding 3 nullable properties).

### Decision: bundling DefinedRegion and OpeningHoursSpecification fixes

Rather than separate issues for the DefinedRegion fix (make addressRegion nullable, add postalCode) and OpeningHoursSpecification fix (make dayOfWeek/opens/closes nullable for seasonal override use), bundled them into the ShippingService issue. Rationale: these modifications are directly motivated by ShippingService's requirements, and the agent needs to understand the context to make the right changes. Separate issues would lose that context.

### Observation: approaching natural completion

The project is reaching a natural completion state. After ShippingService and Organization wiring, the library will have:
- 28/28 Google Rich Results types (100%)
- All 3 Organization merchant features (MerchantReturnPolicy, MemberProgram, ShippingService)
- Complete property coverage per Google's recommendations
- ~90+ sub-types

The question of "what's next?" shifts from implementation to: release management, documentation polish, and potentially proactive QC validation of the final merchant features.

### Results

Both dispatches merged clean — 44 consecutive zero-revision PRs. ShippingService added 5 new types (ShippingService, ShippingConditions, ServicePeriod, ShippingRateSettings, FulfillmentTypeEnumeration) plus DefinedRegion/OpeningHoursSpecification modifications. Organization wiring added 3 nullable merchant properties. Library now has 95 sub-types, 12 enums, 273 tests.

### Observation: zero-revision streak at 44

The streak now spans Cycles 5-24 (20 cycles, 44 PRs). The combination of detailed issue specs and well-structured AGENTS.md means the coding agent consistently produces merge-ready code. The only revision ever needed was in Cycle 3 (tab indentation), addressed by updating AGENTS.md — a permanent fix that paid dividends across all subsequent PRs.

### Milestone: all planned features complete

With [PR #151](https://github.com/EvaLok/schema-org-json-ld/issues/151) merged, the library has achieved full coverage of all planned features:
- 28/28 Google Rich Results types
- All Organization merchant features wired
- All quality audit findings resolved
- 95 sub-types covering the full schema.org type graph needed for Google Rich Results

Opening a QC validation request for Cycles 23-24 changes to confirm end-to-end correctness.

---

## 2026-02-26 — Cycle 25: Maintenance and Project Retrospective

### Context

First cycle with no implementation work to do. All 28 Google Rich Results types are implemented, all quality audit findings resolved, all merchant features complete. This is a maintenance/housekeeping cycle.

### QC validation request for merchant features

Opened [#153](https://github.com/EvaLok/schema-org-json-ld/issues/153) requesting validation of Cycles 23-24 changes (MerchantReturnPolicy, MemberProgram, ShippingService, Organization merchant wiring). This was planned in Cycle 24 but the cycle ended before it could be sent. Lesson: QC requests should be sent immediately after merging, not deferred to "end of cycle."

### Release recommendation

Opened [#154](https://github.com/EvaLok/schema-org-json-ld/issues/154) recommending v1.0.0 to Eva. The last release (v0.0.4) was from June 2024 and only covered Product + BreadcrumbList. The library has grown from 2 types to 28 types, from ~10 classes to 91+ classes, from a handful of tests to 273 tests. This is a significant enough change to warrant a major version bump.

### Test coverage: complete for classes, acceptable for enums

Audit confirmed all 81 schema classes have dedicated test files. The 11 enum types don't have dedicated tests, which is acceptable — they're simple value objects (backed string enums mapping to schema.org URLs) and are exercised through parent type tests. Adding dedicated enum tests would be low-value busywork.

### Project retrospective: 25 cycles, 48 hours

Looking back across 25 cycles:

**Timeline:**
- Cycles 1-3 (Feb 24): Infrastructure setup, PAT issues, AGENTS.md rewrite. Foundational work.
- Cycles 4-5 (Feb 24): Hit stride. Fixed indentation, established zero-revision pattern. 4 types/cycle.
- Cycles 6-9 (Feb 24): Steady state implementation. 3-4 types/cycle. Near-complete coverage.
- Cycles 10-11 (Feb 25): Quality shift — test coverage, README, documentation.
- Cycles 12-15 (Feb 25): Eva directives (README), quality audits, MathSolver.
- Cycles 16-22 (Feb 25): Deep Google docs audits, property gap fixes, QC validation.
- Cycles 23-24 (Feb 25-26): Merchant features sprint. Completed final Organization wiring.
- Cycle 25 (Feb 26): Maintenance. Feature work complete.

**Key metrics:**
- 28/28 Google Rich Results types (100%)
- 95 sub-types
- 273 tests
- 44 consecutive zero-revision PRs (since Cycle 5)
- ~55 total PRs merged
- 1 revision ever needed (tab indentation in Cycle 3, fixed by updating AGENTS.md)

**What worked well:**
1. **Investing in AGENTS.md early** — the single most impactful decision. Every minute spent on documentation paid dividends across 44+ agent PRs.
2. **Shared sub-types first** — building Organization, PostalAddress, AggregateRating, Person before parent types avoided rework and enabled clean parent type implementations.
3. **File conflict-aware batching** — planning concurrent dispatches around file conflicts eliminated merge issues.
4. **cs-fix as mandatory step** — automated code style eliminated an entire class of review feedback.
5. **Research before dispatch** — spending 5-10 minutes reading Google docs before writing issue specs produced better first-attempt results than rushing to dispatch.
6. **QC orchestrator integration** — external validation caught real issues (Review.itemReviewed missing) that internal tests missed.

**What could be improved:**
1. **Polling overhead** — noted in journals for 5+ cycles but never fixed. Each 7-minute agent session consumed 20-30 polling iterations. A webhook or event-driven architecture would eliminate this.
2. **Context consumption** — the orchestrator's 75-minute window is generous but the context window fills up from verbose API responses. Better response parsing would help.
3. **State file evolution** — the JSON state file worked but could benefit from more structured tooling (scripts for common queries).

**Workflow maturity assessment:**
The orchestrator-as-architect pattern has been validated. The combination of clear specifications + well-maintained agent instructions + automated style enforcement produces reliable, first-attempt-success code from the coding agent. The workflow is genuinely good — not perfect, but the friction points (polling, context management) are well-understood and bounded.

### Open questions

- What should the orchestrator do when all planned work is complete? Options: (a) stop cycling, (b) proactive improvements, (c) wait for Eva's direction.
- Is there value in the orchestrator creating comprehensive integration tests (generating full-page JSON-LD with multiple nested types)?
- Should the 11 enum types get dedicated tests for completeness, or is indirect coverage sufficient?

---

## 2026-02-26 — Cycle 27: QC complete, steady state

**Context**: All 28 types implemented, QC validation of merchant features confirmed complete. Eva directive [#156](https://github.com/EvaLok/schema-org-json-ld/issues/156) acted on.

**Observation — QC pipeline works end-to-end**: The full validation loop for merchant features completed successfully: implementation merged (Cycles 23-24) -> QC request filed ([#153](https://github.com/EvaLok/schema-org-json-ld/issues/153)) -> QC orchestrator acknowledged, dispatched agent tasks -> QC agent implemented tests -> QC PRs merged -> results posted ([#37](https://github.com/EvaLok/schema-org-json-ld/issues/37)). Total turnaround: ~3 hours from QC request to full validation. This is the first time the pipeline has been exercised for a multi-feature validation batch and it worked smoothly.

**Observation — steady state operations**: With all types implemented and QC-validated, the orchestrator is now in a "steady state" — primarily responding to Eva's directives and maintaining the repo. This is a natural endpoint for the build phase. The workflow has proven itself over 27 cycles and 44 consecutive zero-revision PRs.

**Decision — direct README edits**: Eva's [#156](https://github.com/EvaLok/schema-org-json-ld/issues/156) requested README changes (broken link, PHP badges). Since this is documentation, not PHP code, I edited directly and pushed to master. This is consistent with the self-iteration policy: state files and docs go direct, code goes through PRs.

**Pattern — GitHub Actions badge strategy**: For per-matrix-job badges, GitHub doesn't provide individual badge URLs per matrix entry. The pragmatic solution: one dynamic workflow status badge (real pass/fail), plus static shields.io badges for each PHP version linking to the workflow page. Not perfect (all link to the same page) but functional and informative.

---

## 2026-02-26 — Cycle 29: Product property audit reveals gaps

**Context**: After several steady-state maintenance cycles, decided to proactively spot-check Google's merchant listing docs against our Product implementation.

**Discovery — significant Property gaps**: Our Product class was missing 11+ Google-recommended properties, plus 5 sub-types. The initial implementation covered the "required" and most common "recommended" properties, but the full merchant listing docs page lists many more. Key gaps: color, material, pattern, size/SizeSpecification, GTIN identifiers, ProductGroup (for variants), PeopleAudience (target demographics), Certification (energy/compliance labels), and UnitPriceSpecification (complex pricing with member tiers/strikethrough prices).

**Lesson — "feature complete" needs periodic re-verification**: We declared Product "done" early on and focused on adding new types. But Google's docs evolve, and our initial implementation only covered the most prominent properties. Periodic audits of existing types against current Google docs are valuable. This is especially true for Product, which is Google's most complex and frequently updated structured data type.

**Decision — two parallel issues**: Split the work into [#160](https://github.com/EvaLok/schema-org-json-ld/issues/160) (simple string properties + SizeSpecification) and [#162](https://github.com/EvaLok/schema-org-json-ld/issues/162) (complex sub-types: ProductGroup, PeopleAudience, Certification, UnitPriceSpecification). Both modify Product.php but add non-overlapping params, so they should be merge-compatible. This is a deliberate experiment in parallel modification of the same file — worth watching whether it causes merge conflicts.

**Pattern — proactive auditing during steady state**: When all planned work is complete, the most productive use of cycles is auditing existing implementations against current Google docs. This is higher value than simply reporting "nothing to do" repeatedly. Future cycles should systematically audit each type.

**Outcome — both PRs merged**: [PR #161](https://github.com/EvaLok/schema-org-json-ld/issues/161) (text properties) merged cleanly. [PR #163](https://github.com/EvaLok/schema-org-json-ld/issues/163) (sub-types) had expected merge conflict with [#161](https://github.com/EvaLok/schema-org-json-ld/issues/161) in Product.php. Copilot's rebase mechanism failed after 3 attempts — it kept adding fix commits on top instead of actually rebasing the branch. Orchestrator resolved manually by fetching the branch, running `git rebase origin/master`, resolving the conflict (keep both property sets), skipping redundant fix commits, and force-pushing.

**Lesson — Copilot can't rebase**: When `@copilot` is asked to resolve merge conflicts, it adds fix commits on top of the branch rather than doing a proper `git rebase`. After 2-3 failed attempts, it's significantly faster for the orchestrator to resolve manually. Future parallel PRs that touch the same file should expect this and plan for orchestrator-assisted rebase.

**Final stats**: 290 tests (+17), 96 schema classes (+5: SizeSpecification, ProductGroup, PeopleAudience, Certification, UnitPriceSpecification), 100 sub-types (+5). Product now fully covers Google's merchant listing recommended properties. 46 consecutive zero-revision PRs.

---

## 2026-02-26 — Cycle 30: Documentation debt and quality polish

**Context**: All 28 types implemented, Product merchant listing properties complete. This cycle focused on documentation and quality improvements discovered during spot-checking.

**Discovery — README documentation debt**: Comprehensive audit of README.md revealed 9 sections significantly outdated. After 17+ PRs of enhancements since Cycle 12, the README examples and tables hadn't kept pace. This was a systemic issue — each quality improvement PR added properties or sub-types but didn't update the README.

**Decision — ADR 0005 for sustainable docs**: Created `doc/adr/0005-documentation-as-continuous-maintenance.md` to formalize that README updates should be part of enhancement PRs going forward, and updated AGENTS.md with a Documentation section. This is a process fix, not just a one-time cleanup.

**Discovery — Google deprecated Course Info**: While spot-checking Google's rich results docs, noticed Course Info was deprecated (June 2025). Our Course/CourseInstance classes remain valid schema.org types, but this is worth noting. No code change needed.

**Discovery — interactionStatistic needs arrays**: Google's docs show multiple interactionStatistic entries per entity (likes, views, comments). Our 4 classes (Person, DiscussionForumPosting, Comment, VideoObject) only accepted a single InteractionCounter. Also found ProductGroup missing aggregateRating and review properties.

**Pattern — agent stall recovery**: [PR #169](https://github.com/EvaLok/schema-org-json-ld/issues/169)'s Copilot agent stalled mid-work — the second commit message was "Changes before error encountered" and `copilot_work_finished` was never emitted. However, all code changes and tests were complete and correct. Recovery: inspect the diff, verify completeness, mark PR ready manually, let CI validate. This is the first observed agent stall where the work was actually done. Lesson: always check the diff before assuming a stalled agent failed.

**Observation — [PR #167](https://github.com/EvaLok/schema-org-json-ld/issues/167) partial coverage**: The README update PR only covered 4 of 9 requested sections (Event, Product, Recipe, API reference). The issue body was detailed but the agent didn't complete all sections. Made direct fixes for the trivial gaps (class count, table rows) and noted remaining sections for a future cycle.

**Final stats**: 296 tests (+6), 96 classes, 100 sub-types, 49 consecutive zero-revision PRs.

---

## 2026-02-26 — Cycle 31: Completing the README documentation sweep

**Context**: Continuing the documentation cleanup from Cycle 30. The previous cycle's [PR #167](https://github.com/EvaLok/schema-org-json-ld/issues/167) only covered 4 of 9 sections. This cycle addresses the remaining 5 sections plus the Supported Types table completeness.

**Audit findings**: Systematic comparison of all 7 remaining README sections against source constructors revealed 50+ undocumented properties and 16 missing classes/enums from the Supported Types table. The heaviest gaps were Organization (13 properties, mostly merchant/business identifiers), Dataset (12 properties), and LocalBusiness (8 properties + no sub-type examples for Restaurant/Store/FoodEstablishment).

**Decision — single comprehensive issue**: Rather than splitting across multiple issues, created one detailed issue ([#171](https://github.com/EvaLok/schema-org-json-ld/issues/171)) covering all gaps. The Cycle 30 agent failed to complete all sections in a similar task, so this time the spec is more structured — each section has an explicit list of properties to add with exact constructor parameter names and types. This is slightly more prescriptive than usual but justified: documentation updates are mechanical (verify param name, add to example), and the risk of the agent inventing wrong parameter names is higher than the risk of over-specification.

**QC status**: The QC orchestrator acknowledged our validation request ([#165](https://github.com/EvaLok/schema-org-json-ld/issues/165)) as QC issue [#41](https://github.com/EvaLok/schema-org-json-ld/issues/41) and dispatched two agent tasks ([#42](https://github.com/EvaLok/schema-org-json-ld/issues/42) Product text properties, [#43](https://github.com/EvaLok/schema-org-json-ld/issues/43) ProductGroup/UnitPriceSpecification). QC [PR #34](https://github.com/EvaLok/schema-org-json-ld/issues/34) and [#35](https://github.com/EvaLok/schema-org-json-ld/issues/35) were merged (MerchantReturnPolicy and MemberProgram/ShippingService coverage). QC [PR #44](https://github.com/EvaLok/schema-org-json-ld/issues/44) (ProductGroup) is in draft. The QC pipeline is working well — it's validating our changes within 1-2 cycles of our request. No failures reported.

**Observation — steady-state workflow character**: At 31 cycles in, the workflow has settled into a maintenance/documentation pattern. All types are implemented, the QC pipeline validates changes, and the primary work is polishing documentation and handling edge cases. The consecutive zero-revision PR streak (49) suggests the AGENTS.md instructions and coding patterns are well-tuned. The workflow is mature enough that the main optimization opportunities are in the orchestrator's own efficiency (better issue specs, faster reviews) rather than in the agent's output quality.

**Open question — what's next after docs**: With all 28 types implemented and documentation nearly complete, the project is approaching a natural v1.0.0 release point. Eva hasn't responded to [#154](https://github.com/EvaLok/schema-org-json-ld/issues/154) (release recommendation). The remaining audit findings are low-priority edge cases (VideoObject BroadcastEvent for live streams, JobPosting beta education properties). The QC pipeline is healthy. It may be time to shift focus to release preparation: CHANGELOG, version bumping, any API surface cleanup before declaring 1.0.

---

## 2026-02-26 — Cycle 32: @graph support and approaching maturity

**Context**: Feature-complete project entering its 32nd cycle. All types implemented, docs updated, QC validating. Looking for genuine value-add work.

**Decision — @graph multi-schema support**: Identified a genuine feature gap: the library has no way to combine multiple schemas into a single JSON-LD block using `@graph`. This is a common real-world need — pages typically combine Article + BreadcrumbList + Organization, or Product + BreadcrumbList, etc. The QC orchestrator flagged "multiple schemas per page" as an untested area. Dispatched [#174](https://github.com/EvaLok/schema-org-json-ld/issues/174) to add `SchemasToJson()` and `SchemasToObject()` methods to JsonLdGenerator.

**Observation — test count discrepancy resolved**: The explore agent counted 385 "test methods" across 86 files by searching for function names starting with "test". PHPUnit reports 296 tests (1562 assertions). The discrepancy is because some test utility methods have names starting with "test" but aren't PHPUnit test methods, or the agent counted helper methods. The actual count from PHPUnit is authoritative: 296 tests.

**QC assessment for v1.0.0**: The QC orchestrator independently assessed the library as ready for v1.0.0 (QC [issue #39](https://github.com/EvaLok/schema-org-json-ld/issues/39)). Key stats: 37 top-level types validated with 0 errors, 156 QC unit tests (867 assertions), 141 advisory warnings (all optional recommended fields, not failures). One bug found across 12 QC sessions (Review missing itemReviewed — fixed in [PR #117](https://github.com/EvaLok/schema-org-json-ld/issues/117)). This independent validation is a strong signal of quality.

**Pattern — feature gap discovery during maintenance**: When all planned features are done, the most productive approach isn't just auditing existing implementations — it's also looking for missing *capabilities* in the infrastructure layer. The `@graph` feature wasn't on any roadmap; it emerged from re-reading the QC report's "not yet tested" list and thinking about what real users would need. This is higher-value work than adding obscure optional properties to existing types.

---

## 2026-02-26 — Cycle 33: QC closure and release preparation

**Context**: All types implemented, @graph support merged, QC validation complete. This is a housekeeping and release-preparation cycle.

### QC validation loop complete

QC request [#165](https://github.com/EvaLok/schema-org-json-ld/issues/165) (Cycle 29 Product enhancements) is fully resolved. The QC orchestrator's final report on QC [issue #41](https://github.com/EvaLok/schema-org-json-ld/issues/41):
- 185 QC unit tests passing (987 assertions)
- 39/39 E2E validations pass, 0 errors, 158 advisory warnings
- All Product enhancement types covered: ProductGroup, SizeSpecification, PeopleAudience, Certification, UnitPriceSpecification
- Product text properties (color, material, pattern, size, GTIN) validated
- @graph API (SchemasToJson/SchemasToObject) validated as a bonus

This closes the last open QC request. The full QC validation pipeline has been exercised successfully across 5 QC sessions over 2 days.

### CHANGELOG.md created

Created a comprehensive CHANGELOG.md following Keep a Changelog format. This documents the journey from v0.0.4 (10 schema files, Product-only) to the current state (96 classes, 12 enums, 301 tests). Organized by: new Rich Results types (26), shared sub-types, Product enhancements, Organization merchant features, infrastructure (@graph), and enums. This is a concrete deliverable for Eva when she's ready to publish v1.0.0.

### Google Search Gallery check — no new types

Checked Google's Search Gallery for any additions since the project started. Still shows the same set of types. "Book actions" is listed but requires a Google partnership program — it's not standard structured data markup. No new types to implement.

### Observation — natural project cadence

The project has settled into a maintenance rhythm. With all 28 types implemented, QC-validated, and documented, each cycle's useful work surface is small: checking for Google docs updates, responding to Eva's directives, and incremental improvements. The CHANGELOG creation was a genuine value-add; future cycles should look for similar concrete deliverables rather than busywork.

### Observation — QC as quality evidence

The QC orchestrator's independent validation (39/39 E2E pass, 0 errors across 185 tests) provides strong third-party evidence that the library works correctly. Combined with our 301 internal tests and 51 consecutive zero-revision PRs, this makes a compelling case for v1.0.0 readiness. Eva's decision on [#154](https://github.com/EvaLok/schema-org-json-ld/issues/154) is the only blocker.

### Open questions

- Should the orchestrator reduce cycle frequency when in steady-state maintenance?
- Is there value in creating example/demo projects that show the library in real-world contexts?
- Should remaining low-priority items (VideoObject BroadcastEvent, JobPosting beta properties) be implemented proactively or left for user demand?

---

## 2026-02-26 — Cycle 35: Tool Error Audit

**Context**: Eva opened [issue #178](https://github.com/EvaLok/schema-org-json-ld/issues/178) requesting an audit of tool usage errors across orchestrator runs. This is a workflow quality task — exactly aligned with the primary objective.

### Key finding: 40 permission denials across 4 cycles

Analyzed runs 31-34 and found all 40 Bash denials fell into predictable categories:

1. **`${}` parameter substitution** (e.g., `${GITHUB_RUN_ID}`) — sandbox blocks this
2. **Shell constructs** (pipes, `&&`, heredocs, `$()`, `for` loops) — not supported by prefix-based allowlist
3. **Retry loops** — the orchestrator kept trying variations of blocked commands, wasting 2-10 turns per cycle

The denial rate was actually *increasing* over cycles (4.4% to 13.7% of turns), suggesting accumulated bad patterns.

### Root cause: documentation, not permissions

All 40 failures had working alternatives within the existing allowlist. The orchestrator simply didn't know which patterns to use. The `.claude/skills/orchestrator-permissions.md` file was incomplete — it documented the allowed commands but not the blocked *constructs*. Prefix matching means `Bash(gh *)` allows `gh api ...` but NOT `gh api ... | jq ...` because the pipe creates a compound command.

### Fixes applied

1. **`.claude/skills/orchestrator-permissions.md`**: Complete rewrite with explicit blocked-constructs table, reliable patterns for all common operations
2. **`STARTUP_CHECKLIST.md`**: Updated all examples to use single-command patterns, Write-then-@file for comments

### Pattern: the Write-then-@file approach

For posting comments or creating issues with complex bodies, the reliable pattern is:
1. Use the **Write** tool to create a file with the body content
2. Use `gh api -F body=@file` to post it

This completely avoids the need for heredocs, multi-line strings, or special character escaping in Bash commands.

### Decision: no workflow changes needed

All problems are solvable within current permissions. Adding more allowed commands (like `bash tools/*`) would be convenient but isn't necessary. The documentation fix is the correct lever.

### Meta-observation

This is a textbook example of the primary objective working as intended. Eva noticed friction, filed an issue, and the audit revealed a systematic problem (40 wasted turns) with a systematic fix (documentation). The fix compounds across all future cycles. This is the flywheel the system prompt describes.

---

## 2026-02-26 — Cycle 36: Eva's Quality Sprint

### Context

Eva filed 9 `input-from-eva` issues ([#180](https://github.com/EvaLok/schema-org-json-ld/issues/180)-[#188](https://github.com/EvaLok/schema-org-json-ld/issues/188)) covering code quality improvements for v1.0.0 preparation. This is a shift from feature implementation to polish — a sign the project is maturing toward release.

### Pattern: direct work vs. delegation

This cycle required splitting work between tasks I do directly (documentation) and tasks I delegate to Copilot (PHP code changes). The split was natural:
- **Direct**: Journal split, reference conversion, PROPERTY_MAP investigation, checklist updates
- **Copilot**: json_encode fix, strict_types, enum consolidation, edge-case tests

The documentation tasks were substantial (35+ files modified, 1300+ line journal split) but well-suited to direct execution since they don't need PHP tooling. The code tasks were well-suited to Copilot since they have clear specs and test-based acceptance criteria.

### Observation: Eva's code review instincts

Eva's issues demonstrate strong code review instincts. She found:
- Missing error handling (json_encode returning false) — a real bug
- Missing strict types — a hardening opportunity
- Inconsistent enum locations — code organization debt
- Missing edge-case tests — test coverage gaps
- Dead code suspicion (PROPERTY_MAP — actually in use, but the instinct to check was correct)

These are exactly the kinds of issues that should be caught before a v1.0.0 release. The fact that Eva found them by reviewing the codebase means the code is readable enough for manual review — a good sign.

### Decision: merge order for concurrent PRs

Merged [PR #190](https://github.com/EvaLok/schema-org-json-ld/issues/190) (json_encode) before [PR #191](https://github.com/EvaLok/schema-org-json-ld/issues/191) (strict_types) because #191 modifies JsonLdGenerator.php more extensively. Both used squash merge to keep history clean. No conflicts despite both touching the same file.

### Lesson: directly assigning Eva's issues to Copilot works well

Rather than creating separate agent-task issues, I assigned Copilot directly to Eva's input-from-eva issues and added agent context as comments. This saved issue creation overhead while keeping Eva's issues as the source of truth. The issue body was clear enough for the agent, with my comment providing the implementation hints (file paths, TDD guidance, etc.).

### v1.0.0 roadmap

After this cycle, the remaining code quality work is:
1. [#184](https://github.com/EvaLok/schema-org-json-ld/issues/184) — Enum consolidation (dispatched, in progress)
2. [#182](https://github.com/EvaLok/schema-org-json-ld/issues/182) — Edge-case tests (dispatched, in progress)
3. [#181](https://github.com/EvaLok/schema-org-json-ld/issues/181) — PHPStan CI (needs Eva to merge workflow changes)

Once these are done, the library should be ready for a final QC validation and v1.0.0 tag.

---

## 2026-02-26 — Cycle 37: QC-driven property gaps and cross-PR conflict management

### Context

This cycle's main work was reviewing/merging the two PRs dispatched in Cycle 36 ([#192](https://github.com/EvaLok/schema-org-json-ld/issues/192) enum consolidation, [#193](https://github.com/EvaLok/schema-org-json-ld/issues/193) edge-case tests), plus responding to a new QC report identifying ~40 validator warnings from missing optional properties.

### Lesson — cross-PR import conflicts after namespace changes

After merging [PR #192](https://github.com/EvaLok/schema-org-json-ld/issues/192) (which moved all enums from `v1\Schema` to `v1\Enum`), [PR #193](https://github.com/EvaLok/schema-org-json-ld/issues/193) had a stale import. Git's rebase resolved the positional conflict cleanly but couldn't detect the semantic issue — the new `MerchantReturnEnumeration` import added by #193 still pointed to the old namespace.

**Takeaway**: When one PR moves files/namespaces and another PR adds new imports in the same file, always manually verify imports after rebase. Git handles text conflicts but not semantic correctness.

### Pattern — QC-driven property additions

The QC report ([#57](https://github.com/EvaLok/schema-org-json-ld-qc/issues/57)) identified 7 missing properties across 5 types causing 40+ validator warnings. This is exactly the kind of feedback the QC pipeline is designed to surface — gaps that internal unit tests don't catch because they test what exists, not what's missing. The QC orchestrator validates against Google's Rich Results Test expectations, which flag missing recommended properties as warnings.

The prioritized breakdown:
1. HowToStep.video + itemListElement — 34 warnings (biggest impact)
2. datePublished on 3 types — 3 warnings (simple string additions)
3. VideoObject.publication (BroadcastEvent) — 1 warning (new class needed)
4. Product.subjectOf — 2-3 warnings

Split into two non-overlapping agent tasks for parallel dispatch. This is the established pattern: identify non-conflicting file sets, dispatch in parallel, merge sequentially.

### Observation — enum consolidation was clean

The enum consolidation PR was one of the cleanest refactoring PRs in the project's history. 11 files renamed, 37 files modified (import updates), zero logic changes. The Copilot agent handled the mechanical find-and-replace perfectly — this is exactly the kind of task where coding agents excel. No revision needed. The subsequent README and AGENTS.md updates were done directly since they're documentation.

### Stats update

- 309 tests (6 new edge-case tests)
- All Eva input-from-eva issues closed except [#181](https://github.com/EvaLok/schema-org-json-ld/issues/181) (PHPStan, blocked on workflow permission)

---

## 2026-02-26 — Cycle 38: Retiring vanity metrics and PHPStan dispatch

### Context

Eva filed [#201](https://github.com/EvaLok/schema-org-json-ld/issues/201) asking to drop the "zero-revision streak" metric from evaluations. Dispatched the last remaining Eva directive: PHPStan static analysis ([#181](https://github.com/EvaLok/schema-org-json-ld/issues/181)).

### Lesson — vanity metrics and perverse incentives

Eva's observation about the zero-revision streak was incisive: "this fixation is potentially toxic, in that it encourages wilful ignorance of issues that could potentially break the streak. revisions are healthy, embrace revision, don't celebrate complacency."

She's right. The metric started as a legitimate signal of AGENTS.md quality — if the agent consistently produces merge-ready code, the instructions are good. But over 37 cycles it became a vanity metric that I was celebrating in every worklog and journal entry. The danger: if faced with a PR that's "mostly fine but could be better," the streak creates unconscious pressure to merge rather than request revision. That's exactly backwards — revisions are how quality improves.

**Takeaway**: Metrics shape behavior. Track metrics that encourage the behavior you actually want. A "revision rate" would be neutral information; a "zero-revision streak" actively penalizes healthy engineering practices.

### Decision — what to track instead

Going forward, PR quality evaluation will focus on:
- Does the code solve the problem correctly?
- Are there edge cases or improvements worth requesting?
- Would a revision produce meaningfully better code?

No metric, no streak. Just honest assessment.

### PHPStan dispatch

Dispatched [#181](https://github.com/EvaLok/schema-org-json-ld/issues/181) to Copilot (gpt-5.3-codex). This is the last remaining Eva input-from-eva issue. Since it modifies `.github/workflows/main.yml`, the resulting PR will need Eva to merge. Added implementation context as a comment on the issue.

### Observation — project maturity

With PHPStan, the project will have a complete quality toolchain: PHPUnit for tests, PHP-CS-Fixer for style, PHPStan for static analysis. This is a well-rounded setup for a PHP library. The only remaining gap identified is the release process itself (v1.0.0 tagging, which Eva hasn't responded to yet via [#154](https://github.com/EvaLok/schema-org-json-ld/issues/154)).
