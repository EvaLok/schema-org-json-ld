{
  "title": "Phase 3g: Port 11 schema types to TypeScript (Level 8+: final batch with inheritance)",
  "body": "## Overview\n\nPort the final 11 schema types. This batch includes 6 types that use **class inheritance** (extending Article, SoftwareApplication, or LocalBusiness), 2 simple types (FAQPage, Quiz), and 3 complex standalone types (DiscussionForumPosting, Product, ProductGroup).\n\n**IMPORTANT**: Product and ProductGroup have a circular dependency — each references the other. TypeScript handles this fine with class references. Implement ProductGroup BEFORE Product (Product imports ProductGroup, and the barrel file resolves the circular reference).\n\n## Reference\n\n- **PHP source**: `php/src/v1/Schema/` (see individual files below)\n- **TS conventions**: `AGENTS-ts.md`\n- **TS skill**: `.claude/skills/ts-schema-implementation/SKILL.md`\n- **Existing TS examples**: `ts/src/schema/Article.ts` (parent class for inheritance), `ts/src/schema/SoftwareApplication.ts`, `ts/src/schema/LocalBusiness.ts`\n\n## Types to implement\n\nAll files go in `ts/src/schema/`. Tests go in `ts/test/schema/`.\n\n**IMPORTANT**: Implement types in the order listed — later types depend on earlier ones.\n\n### 1. `FAQPage.ts` — positional constructor (simple)\n\nPHP ref: `php/src/v1/Schema/FAQPage.php`\n\nProperties:\n- `mainEntity: readonly Question[]` (required)\n\nImports: `Question` from `../schema/`\n\nschemaType: `'FAQPage'`\n\n### 2. `Quiz.ts` — positional constructor\n\nPHP ref: `php/src/v1/Schema/Quiz.php`\n\nProperties:\n- `hasPart: readonly Question[]` (required)\n- `about: string | null` (optional, default null)\n- `educationalAlignment: AlignmentObject | null` (optional, default null)\n- `name: string | null` (optional, default null)\n- `description: string | null` (optional, default null)\n\nImports: `Question`, `AlignmentObject` from `../schema/`\n\nschemaType: `'Quiz'`\n\n### 3. `BlogPosting.ts` — EXTENDS Article\n\nPHP ref: `php/src/v1/Schema/BlogPosting.php`\n\nThis class extends `Article` and adds NO additional properties. It only overrides `schemaType`.\n\n```typescript\nimport { Article } from \"./Article.js\";\nimport type { ArticleOptions } from \"./Article.js\";\n\nexport class BlogPosting extends Article {\n    static readonly schemaType = \"BlogPosting\";\n\n    constructor(options: ArticleOptions) {\n        super(options);\n    }\n}\n```\n\nRe-export `ArticleOptions` if needed for consumers (or they can import from Article directly).\n\nschemaType: `'BlogPosting'`\n\n### 4. `NewsArticle.ts` — EXTENDS Article\n\nPHP ref: `php/src/v1/Schema/NewsArticle.php`\n\nSame pattern as BlogPosting — extends `Article`, overrides only `schemaType`.\n\n```typescript\nimport { Article } from \"./Article.js\";\nimport type { ArticleOptions } from \"./Article.js\";\n\nexport class NewsArticle extends Article {\n    static readonly schemaType = \"NewsArticle\";\n\n    constructor(options: ArticleOptions) {\n        super(options);\n    }\n}\n```\n\nschemaType: `'NewsArticle'`\n\n### 5. `MobileApplication.ts` — EXTENDS SoftwareApplication\n\nPHP ref: `php/src/v1/Schema/MobileApplication.php`\n\nExtends `SoftwareApplication`, overrides only `schemaType`.\n\n```typescript\nimport { SoftwareApplication } from \"./SoftwareApplication.js\";\nimport type { SoftwareApplicationOptions } from \"./SoftwareApplication.js\";\n\nexport class MobileApplication extends SoftwareApplication {\n    static readonly schemaType = \"MobileApplication\";\n\n    constructor(options: SoftwareApplicationOptions) {\n        super(options);\n    }\n}\n```\n\nschemaType: `'MobileApplication'`\n\n### 6. `WebApplication.ts` — EXTENDS SoftwareApplication\n\nPHP ref: `php/src/v1/Schema/WebApplication.php`\n\nSame pattern as MobileApplication.\n\nschemaType: `'WebApplication'`\n\n### 7. `FoodEstablishment.ts` — EXTENDS LocalBusiness (adds 1 property)\n\nPHP ref: `php/src/v1/Schema/FoodEstablishment.php`\n\nExtends `LocalBusiness` and adds one optional property: `acceptsReservations`.\n\nCreate an exported `FoodEstablishmentOptions` interface:\n\n```typescript\nimport type { LocalBusinessOptions } from \"./LocalBusiness.js\";\n\nexport interface FoodEstablishmentOptions extends LocalBusinessOptions {\n    acceptsReservations?: boolean | string | null;\n}\n```\n\n```typescript\nexport class FoodEstablishment extends LocalBusiness {\n    static readonly schemaType = \"FoodEstablishment\";\n    public readonly acceptsReservations: boolean | string | null;\n\n    constructor(options: FoodEstablishmentOptions) {\n        super(options);\n        this.acceptsReservations = options.acceptsReservations ?? null;\n    }\n}\n```\n\nNote: `acceptsReservations` is typed `boolean | string | null` in PHP.\n\nschemaType: `'FoodEstablishment'`\n\n### 8. `Store.ts` — EXTENDS LocalBusiness\n\nPHP ref: `php/src/v1/Schema/Store.php`\n\nExtends `LocalBusiness`, overrides only `schemaType`. No additional properties.\n\nschemaType: `'Store'`\n\n### 9. `DiscussionForumPosting.ts` — OPTIONS OBJECT (11 optional properties)\n\nPHP ref: `php/src/v1/Schema/DiscussionForumPosting.php`\n\nCreate an exported `DiscussionForumPostingOptions` interface:\n\n```typescript\nexport interface DiscussionForumPostingOptions {\n    author: Person | Organization;\n    datePublished: string;\n    text: string;\n    headline?: string | null;\n    url?: string | null;\n    dateModified?: string | null;\n    image?: ImageObject | null;\n    video?: VideoObject | null;\n    comment?: readonly Comment[] | null;\n    interactionStatistic?: InteractionCounter | readonly InteractionCounter[] | null;\n    isPartOf?: string | null;\n    sharedContent?: string | null;\n    creativeWorkStatus?: string | null;\n    mainEntityOfPage?: string | null;\n}\n```\n\nNote: `author`, `datePublished`, `text` are REQUIRED. `author` is `Person | Organization`. `interactionStatistic` accepts single or array.\n\nImports: `Person`, `Organization`, `ImageObject`, `VideoObject`, `Comment`, `InteractionCounter` from `../schema/`\n\nschemaType: `'DiscussionForumPosting'`\n\n### 10. `ProductGroup.ts` — OPTIONS OBJECT (9 optional properties)\n\nPHP ref: `php/src/v1/Schema/ProductGroup.php`\n\n**IMPORTANT**: Implement BEFORE Product due to circular dependency.\n\nCreate an exported `ProductGroupOptions` interface:\n\n```typescript\nexport interface ProductGroupOptions {\n    name: string;\n    productGroupID?: string | null;\n    variesBy?: string | readonly string[] | null;\n    hasVariant?: Product | readonly Product[] | null;\n    url?: string | null;\n    description?: string | null;\n    brand?: Brand | null;\n    aggregateRating?: AggregateRating | null;\n    review?: Review | null;\n    subjectOf?: string | null;\n}\n```\n\nNote: Only `name` is REQUIRED. `variesBy` accepts string or array. `hasVariant` accepts single Product or array.\n\nImports: `Brand`, `AggregateRating`, `Review` from `../schema/`, and `Product` (forward reference — circular dep).\n\nschemaType: `'ProductGroup'`\n\n### 11. `Product.ts` — OPTIONS OBJECT (20 optional properties)\n\nPHP ref: `php/src/v1/Schema/Product.php`\n\nThis is the largest and most complex type. 5 required + 20 optional properties.\n\nCreate an exported `ProductOptions` interface:\n\n```typescript\nexport interface ProductOptions {\n    name: string;\n    image: readonly string[];\n    description: string;\n    sku: string;\n    offers: readonly Offer[] | AggregateOffer;\n    brand?: Brand | null;\n    mpn?: string | null;\n    weight?: QuantitativeValue | null;\n    aggregateRating?: AggregateRating | null;\n    review?: Review | readonly Review[] | null;\n    color?: string | null;\n    material?: string | null;\n    pattern?: string | null;\n    size?: string | SizeSpecification | null;\n    inProductGroupWithID?: string | null;\n    gtin?: string | null;\n    gtin8?: string | null;\n    gtin12?: string | null;\n    gtin13?: string | null;\n    gtin14?: string | null;\n    isbn?: string | null;\n    isVariantOf?: ProductGroup | null;\n    audience?: PeopleAudience | null;\n    hasCertification?: Certification | readonly Certification[] | null;\n    subjectOf?: string | null;\n}\n```\n\nNote: `name`, `image`, `description`, `sku`, `offers` are ALL REQUIRED. `offers` is a union of `Offer[] | AggregateOffer`. `review` and `hasCertification` accept single or array. `size` is a union of `string | SizeSpecification`. `isVariantOf` references ProductGroup (circular dep).\n\nImports: `Brand`, `QuantitativeValue`, `AggregateRating`, `Review`, `SizeSpecification`, `ProductGroup`, `PeopleAudience`, `Certification`, `Offer`, `AggregateOffer` from `../schema/`\n\nschemaType: `'Product'`\n\n## Testing\n\nCreate one test file per type in `ts/test/schema/`. Each test file must cover:\n\n1. **Minimal construction** — only required properties, verify `@context`, `@type`, required fields\n2. **Null omission** — optional properties when null do NOT appear in JSON output\n3. **Full construction** — all properties set (or representative subset for large types)\n4. **Special cases**:\n   - `BlogPosting`: verify `@type` is `\"BlogPosting\"` (not `\"Article\"`); test with full ArticleOptions\n   - `NewsArticle`: verify `@type` is `\"NewsArticle\"`; test with full ArticleOptions\n   - `MobileApplication`: verify `@type` is `\"MobileApplication\"`; test with SoftwareApplicationOptions\n   - `WebApplication`: verify `@type` is `\"WebApplication\"`\n   - `FoodEstablishment`: verify `@type` is `\"FoodEstablishment\"`; test `acceptsReservations` with both boolean and string values\n   - `Store`: verify `@type` is `\"Store\"`; test with LocalBusinessOptions\n   - `DiscussionForumPosting`: test `author` with both Person and Organization; test `interactionStatistic` single and array; test `comment` as array\n   - `Product`: test `offers` with both `Offer[]` and `AggregateOffer`; test `review` and `hasCertification` single and array; test `size` with both string and SizeSpecification; test `isVariantOf` with ProductGroup\n   - `ProductGroup`: test `hasVariant` with both single Product and array; test `variesBy` with string and array\n   - `FAQPage`: test with array of Question objects\n   - `Quiz`: test with Question array and AlignmentObject\n\n## Barrel exports\n\nUpdate `ts/src/index.ts` to export all 11 new types AND their Options interfaces (`FoodEstablishmentOptions`, `DiscussionForumPostingOptions`, `ProductGroupOptions`, `ProductOptions`). Keep exports sorted alphabetically.\n\n**IMPORTANT**: Fix these existing issues in the codebase:\n\n1. **Barrel file ordering** (`ts/src/index.ts`): `PostalAddress` must come BEFORE `ProfilePage` (alphabetical)\n2. **Article.ts type fix**: Change `image` property type from `readonly string[] | null` to `readonly (string | ImageObject)[] | null` — add `ImageObject` import\n3. **Recipe.ts type fix**: Change `hasPart` property type from `readonly Clip[] | null` to `readonly (Clip | HowToSection)[] | null` — HowToSection is already imported\n\n## Acceptance criteria\n\n- [ ] All 11 schema class files created in `ts/src/schema/`\n- [ ] Inheritance: BlogPosting extends Article, NewsArticle extends Article, MobileApplication extends SoftwareApplication, WebApplication extends SoftwareApplication, FoodEstablishment extends LocalBusiness, Store extends LocalBusiness\n- [ ] FoodEstablishment correctly extends LocalBusinessOptions with acceptsReservations\n- [ ] Product/ProductGroup circular dependency handled correctly\n- [ ] Property names match PHP exactly\n- [ ] Schema type dependencies correctly imported\n- [ ] Union types handled correctly\n- [ ] Array types use `readonly` where appropriate\n- [ ] Test file for each type in `ts/test/schema/`\n- [ ] Tests pass (`npm run test`)\n- [ ] Biome passes (`npx biome check`)\n- [ ] Build succeeds (`npm run build`)\n- [ ] `index.ts` updated with all new exports (sorted alphabetically)\n- [ ] No modifications to `JsonLdGenerator.ts` or `TypedSchema.ts`\n- [ ] No `any` types used",
  "labels": ["agent-task"],
  "assignees": ["copilot-swe-agent[bot]"],
  "agent_assignment": {
    "target_repo": "EvaLok/schema-org-json-ld",
    "base_branch": "master",
    "model": "gpt-5.3-codex",
    "custom_instructions": ""
  }
}
